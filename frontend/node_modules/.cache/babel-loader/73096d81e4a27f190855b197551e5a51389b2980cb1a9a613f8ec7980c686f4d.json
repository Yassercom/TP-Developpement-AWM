{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\myPC\\\\CascadeProjects\\\\TP-Developpement-AWM-C\\\\TP-Developpement-AWM\\\\frontend\\\\src\\\\context\\\\ItemContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { AuthContext } from './AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ItemContext = /*#__PURE__*/createContext();\nexport const ItemProvider = ({\n  children\n}) => {\n  _s();\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    isAuthenticated\n  } = useContext(AuthContext);\n\n  // Get all items\n  useEffect(() => {\n    const getItems = async () => {\n      if (isAuthenticated) {\n        try {\n          setLoading(true);\n          const res = await axios.get('http://localhost:5001/api/items');\n          setItems(res.data);\n          setError(null);\n        } catch (err) {\n          var _err$response, _err$response$data;\n          setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.msg) || 'Error fetching items');\n        } finally {\n          setLoading(false);\n        }\n      }\n    };\n    if (isAuthenticated) {\n      getItems();\n    }\n  }, [isAuthenticated]);\n\n  // Add item\n  const addItem = async formData => {\n    try {\n      const res = await axios.post('http://localhost:5001/api/items', formData);\n      setItems([res.data, ...items]);\n      setError(null);\n      return true;\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.msg) || 'Error adding item');\n      return false;\n    }\n  };\n\n  // Update item\n  const updateItem = async (id, formData) => {\n    try {\n      const res = await axios.put(`http://localhost:5001/api/items/${id}`, formData);\n      setItems(items.map(item => item.id === id ? res.data : item));\n      setError(null);\n      return true;\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.msg) || 'Error updating item');\n      return false;\n    }\n  };\n\n  // Delete item\n  const deleteItem = async id => {\n    try {\n      await axios.delete(`http://localhost:5001/api/items/${id}`);\n      setItems(items.filter(item => item.id !== id));\n      setError(null);\n      return true;\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.msg) || 'Error deleting item');\n      return false;\n    }\n  };\n\n  // Clear errors\n  const clearErrors = () => setError(null);\n  return /*#__PURE__*/_jsxDEV(ItemContext.Provider, {\n    value: {\n      items,\n      loading,\n      error,\n      addItem,\n      updateItem,\n      deleteItem,\n      clearErrors\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(ItemProvider, \"cGYyE1pM69RMrCD0TCEA3ukFhKI=\");\n_c = ItemProvider;\nvar _c;\n$RefreshReg$(_c, \"ItemProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","axios","AuthContext","jsxDEV","_jsxDEV","ItemContext","ItemProvider","children","_s","items","setItems","loading","setLoading","error","setError","isAuthenticated","getItems","res","get","data","err","_err$response","_err$response$data","response","msg","addItem","formData","post","_err$response2","_err$response2$data","updateItem","id","put","map","item","_err$response3","_err$response3$data","deleteItem","delete","filter","_err$response4","_err$response4$data","clearErrors","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/myPC/CascadeProjects/TP-Developpement-AWM-C/TP-Developpement-AWM/frontend/src/context/ItemContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { AuthContext } from './AuthContext';\r\n\r\nexport const ItemContext = createContext();\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { isAuthenticated } = useContext(AuthContext);\r\n\r\n  // Get all items\r\n  useEffect(() => {\r\n    const getItems = async () => {\r\n      if (isAuthenticated) {\r\n        try {\r\n          setLoading(true);\r\n          const res = await axios.get('http://localhost:5001/api/items');\r\n          setItems(res.data);\r\n          setError(null);\r\n        } catch (err) {\r\n          setError(err.response?.data?.msg || 'Error fetching items');\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (isAuthenticated) {\r\n      getItems();\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  // Add item\r\n  const addItem = async (formData) => {\r\n    try {\r\n      const res = await axios.post('http://localhost:5001/api/items', formData);\r\n      setItems([res.data, ...items]);\r\n      setError(null);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Error adding item');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Update item\r\n  const updateItem = async (id, formData) => {\r\n    try {\r\n      const res = await axios.put(`http://localhost:5001/api/items/${id}`, formData);\r\n      setItems(items.map(item => (item.id === id ? res.data : item)));\r\n      setError(null);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Error updating item');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Delete item\r\n  const deleteItem = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5001/api/items/${id}`);\r\n      setItems(items.filter(item => item.id !== id));\r\n      setError(null);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Error deleting item');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Clear errors\r\n  const clearErrors = () => setError(null);\r\n\r\n  return (\r\n    <ItemContext.Provider\r\n      value={{\r\n        items,\r\n        loading,\r\n        error,\r\n        addItem,\r\n        updateItem,\r\n        deleteItem,\r\n        clearErrors\r\n      }}\r\n    >\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC7E,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,OAAO,MAAMC,WAAW,gBAAGR,aAAa,CAAC,CAAC;AAE1C,OAAO,MAAMS,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC5C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM;IAAEiB;EAAgB,CAAC,GAAGf,UAAU,CAACE,WAAW,CAAC;;EAEnD;EACAH,SAAS,CAAC,MAAM;IACd,MAAMiB,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAID,eAAe,EAAE;QACnB,IAAI;UACFH,UAAU,CAAC,IAAI,CAAC;UAChB,MAAMK,GAAG,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAC,iCAAiC,CAAC;UAC9DR,QAAQ,CAACO,GAAG,CAACE,IAAI,CAAC;UAClBL,QAAQ,CAAC,IAAI,CAAC;QAChB,CAAC,CAAC,OAAOM,GAAG,EAAE;UAAA,IAAAC,aAAA,EAAAC,kBAAA;UACZR,QAAQ,CAAC,EAAAO,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcF,IAAI,cAAAG,kBAAA,uBAAlBA,kBAAA,CAAoBE,GAAG,KAAI,sBAAsB,CAAC;QAC7D,CAAC,SAAS;UACRZ,UAAU,CAAC,KAAK,CAAC;QACnB;MACF;IACF,CAAC;IAED,IAAIG,eAAe,EAAE;MACnBC,QAAQ,CAAC,CAAC;IACZ;EACF,CAAC,EAAE,CAACD,eAAe,CAAC,CAAC;;EAErB;EACA,MAAMU,OAAO,GAAG,MAAOC,QAAQ,IAAK;IAClC,IAAI;MACF,MAAMT,GAAG,GAAG,MAAMhB,KAAK,CAAC0B,IAAI,CAAC,iCAAiC,EAAED,QAAQ,CAAC;MACzEhB,QAAQ,CAAC,CAACO,GAAG,CAACE,IAAI,EAAE,GAAGV,KAAK,CAAC,CAAC;MAC9BK,QAAQ,CAAC,IAAI,CAAC;MACd,OAAO,IAAI;IACb,CAAC,CAAC,OAAOM,GAAG,EAAE;MAAA,IAAAQ,cAAA,EAAAC,mBAAA;MACZf,QAAQ,CAAC,EAAAc,cAAA,GAAAR,GAAG,CAACG,QAAQ,cAAAK,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcT,IAAI,cAAAU,mBAAA,uBAAlBA,mBAAA,CAAoBL,GAAG,KAAI,mBAAmB,CAAC;MACxD,OAAO,KAAK;IACd;EACF,CAAC;;EAED;EACA,MAAMM,UAAU,GAAG,MAAAA,CAAOC,EAAE,EAAEL,QAAQ,KAAK;IACzC,IAAI;MACF,MAAMT,GAAG,GAAG,MAAMhB,KAAK,CAAC+B,GAAG,CAAC,mCAAmCD,EAAE,EAAE,EAAEL,QAAQ,CAAC;MAC9EhB,QAAQ,CAACD,KAAK,CAACwB,GAAG,CAACC,IAAI,IAAKA,IAAI,CAACH,EAAE,KAAKA,EAAE,GAAGd,GAAG,CAACE,IAAI,GAAGe,IAAK,CAAC,CAAC;MAC/DpB,QAAQ,CAAC,IAAI,CAAC;MACd,OAAO,IAAI;IACb,CAAC,CAAC,OAAOM,GAAG,EAAE;MAAA,IAAAe,cAAA,EAAAC,mBAAA;MACZtB,QAAQ,CAAC,EAAAqB,cAAA,GAAAf,GAAG,CAACG,QAAQ,cAAAY,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAchB,IAAI,cAAAiB,mBAAA,uBAAlBA,mBAAA,CAAoBZ,GAAG,KAAI,qBAAqB,CAAC;MAC1D,OAAO,KAAK;IACd;EACF,CAAC;;EAED;EACA,MAAMa,UAAU,GAAG,MAAON,EAAE,IAAK;IAC/B,IAAI;MACF,MAAM9B,KAAK,CAACqC,MAAM,CAAC,mCAAmCP,EAAE,EAAE,CAAC;MAC3DrB,QAAQ,CAACD,KAAK,CAAC8B,MAAM,CAACL,IAAI,IAAIA,IAAI,CAACH,EAAE,KAAKA,EAAE,CAAC,CAAC;MAC9CjB,QAAQ,CAAC,IAAI,CAAC;MACd,OAAO,IAAI;IACb,CAAC,CAAC,OAAOM,GAAG,EAAE;MAAA,IAAAoB,cAAA,EAAAC,mBAAA;MACZ3B,QAAQ,CAAC,EAAA0B,cAAA,GAAApB,GAAG,CAACG,QAAQ,cAAAiB,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcrB,IAAI,cAAAsB,mBAAA,uBAAlBA,mBAAA,CAAoBjB,GAAG,KAAI,qBAAqB,CAAC;MAC1D,OAAO,KAAK;IACd;EACF,CAAC;;EAED;EACA,MAAMkB,WAAW,GAAGA,CAAA,KAAM5B,QAAQ,CAAC,IAAI,CAAC;EAExC,oBACEV,OAAA,CAACC,WAAW,CAACsC,QAAQ;IACnBC,KAAK,EAAE;MACLnC,KAAK;MACLE,OAAO;MACPE,KAAK;MACLY,OAAO;MACPK,UAAU;MACVO,UAAU;MACVK;IACF,CAAE;IAAAnC,QAAA,EAEDA;EAAQ;IAAAsC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACxC,EAAA,CArFWF,YAAY;AAAA2C,EAAA,GAAZ3C,YAAY;AAAA,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}