{"ast":null,"code":"import React,{createContext,useState,useEffect,useContext}from'react';import axios from'axios';import{AuthContext}from'./AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";export const ItemContext=/*#__PURE__*/createContext();export const ItemProvider=_ref=>{let{children}=_ref;const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const{isAuthenticated}=useContext(AuthContext);// Get all items\nuseEffect(()=>{const getItems=async()=>{if(isAuthenticated){try{setLoading(true);const res=await axios.get('http://localhost:5001/api/items');setItems(res.data);setError(null);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'Error fetching items');}finally{setLoading(false);}}};if(isAuthenticated){getItems();}},[isAuthenticated]);// Add item\nconst addItem=async formData=>{try{const res=await axios.post('http://localhost:5001/api/items',formData);setItems([res.data,...items]);setError(null);return true;}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.msg)||'Error adding item');return false;}};// Update item\nconst updateItem=async(id,formData)=>{try{const res=await axios.put(`http://localhost:5001/api/items/${id}`,formData);setItems(items.map(item=>item.id===id?res.data:item));setError(null);return true;}catch(err){var _err$response3,_err$response3$data;setError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.msg)||'Error updating item');return false;}};// Delete item\nconst deleteItem=async id=>{try{await axios.delete(`http://localhost:5001/api/items/${id}`);setItems(items.filter(item=>item.id!==id));setError(null);return true;}catch(err){var _err$response4,_err$response4$data;setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.msg)||'Error deleting item');return false;}};// Clear errors\nconst clearErrors=()=>setError(null);return/*#__PURE__*/_jsx(ItemContext.Provider,{value:{items,loading,error,addItem,updateItem,deleteItem,clearErrors},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","axios","AuthContext","jsx","_jsx","ItemContext","ItemProvider","_ref","children","items","setItems","loading","setLoading","error","setError","isAuthenticated","getItems","res","get","data","err","_err$response","_err$response$data","response","msg","addItem","formData","post","_err$response2","_err$response2$data","updateItem","id","put","map","item","_err$response3","_err$response3$data","deleteItem","delete","filter","_err$response4","_err$response4$data","clearErrors","Provider","value"],"sources":["C:/Users/myPC/CascadeProjects/TP-Developpement-AWM-C/TP-Developpement-AWM/frontend/src/context/ItemContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { AuthContext } from './AuthContext';\r\n\r\nexport const ItemContext = createContext();\r\n\r\nexport const ItemProvider = ({ children }) => {\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { isAuthenticated } = useContext(AuthContext);\r\n\r\n  // Get all items\r\n  useEffect(() => {\r\n    const getItems = async () => {\r\n      if (isAuthenticated) {\r\n        try {\r\n          setLoading(true);\r\n          const res = await axios.get('http://localhost:5001/api/items');\r\n          setItems(res.data);\r\n          setError(null);\r\n        } catch (err) {\r\n          setError(err.response?.data?.msg || 'Error fetching items');\r\n        } finally {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (isAuthenticated) {\r\n      getItems();\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  // Add item\r\n  const addItem = async (formData) => {\r\n    try {\r\n      const res = await axios.post('http://localhost:5001/api/items', formData);\r\n      setItems([res.data, ...items]);\r\n      setError(null);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Error adding item');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Update item\r\n  const updateItem = async (id, formData) => {\r\n    try {\r\n      const res = await axios.put(`http://localhost:5001/api/items/${id}`, formData);\r\n      setItems(items.map(item => (item.id === id ? res.data : item)));\r\n      setError(null);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Error updating item');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Delete item\r\n  const deleteItem = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5001/api/items/${id}`);\r\n      setItems(items.filter(item => item.id !== id));\r\n      setError(null);\r\n      return true;\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Error deleting item');\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Clear errors\r\n  const clearErrors = () => setError(null);\r\n\r\n  return (\r\n    <ItemContext.Provider\r\n      value={{\r\n        items,\r\n        loading,\r\n        error,\r\n        addItem,\r\n        updateItem,\r\n        deleteItem,\r\n        clearErrors\r\n      }}\r\n    >\r\n      {children}\r\n    </ItemContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}